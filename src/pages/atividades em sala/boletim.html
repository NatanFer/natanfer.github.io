<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="row">
        <div class="col-4">
            <div class="row-cols-4" id="materia1">
                <div class="col">

                    <label for="cars">Escolha a materia:</label>

                    <label for="nomeUsuario">Nome do aluno</label>
                    <input type="text" id="nomeUsuario">
                </div>
                <div class="col">
                    <label for="nomeInstituicao">Escola/Instituicao</label>
                    <input type="text" id="nomeInstituicao">
                </div>
                <div class="col-2 p-md-4">
                    <label for="nomeMateria">Matéria</label>
                    <select id="nomeMateria" name="nomeMateria">
                        <option value="...">...</option>
                        <option value="portugues">Português</option>
                        <option value="matematica">Matematica</option>
                        <option value="fisica">fisica</option>
                        <option value="educacao fisica">Educação Fisica</option>
                        <option value="quimica">Quimica</option>
                        <option value="historia">Historia</option>
                    </select>
                </div>
                <div class="col-2 p-md-4 input-group">
                    <input type="number">
                    <input type="number">
                    <input type="number">
                    <input type="number">
                </div>
            </div>
            <button onclick="save()">Verificar Notas</button>
            <p class="m-3 p-2" id="resultNotas"></p>
        </div>
    </div>


    <script>
        let materia = { id: 0, nome: "", notas: [], total: 0, printInfo: "" };
        let materias = [];
        let notas = [];
        let user = { nome: "", instituicao: "", curso: "" };
        function save() {
            if (verifi()){
            let inputNotas = document.querySelectorAll("div.input-group > input");
            let totalNotas = 0;
            inputNotas.forEach(e => {
                notas.push(parseFloat(e.value))
                totalNotas += parseFloat(e.value);

            })
            user.nome = nomeUsuario.value;
            user.instituicao = nomeInstituicao.value;
            let resultados = `<b>BOLETIM DE: ${user.nome.toLocaleUpperCase()}</b><br><b>INSTITUIÇÃO/ESCOLA: ${user.instituicao.toLocaleUpperCase()} </b>`;
            
        if (!maxinotas()){
                materias.push(
                    {
                        id: materia.id++,
                        nome: nomeMateria.value.toLocaleUpperCase(),
                        notas: notas,
                        total: totalNotas,
                        info: `<hr>
                            RESULTADO DE: <b>${nomeMateria.value.toLocaleUpperCase()}</b> 
                            <ul class="list-group">
                                <li class="list-group-item"><b>1º Bimestre:</b> ${notas[0]}</li>
                                <li class="list-group-item"><b>2º Bimestre:</b> ${notas[1]}</li>
                                <li class="list-group-item"><b>3º Bimestre:</b> ${notas[2]}</li>
                                <li class="list-group-item"><b>4º Bimestre:</b> ${notas[3]}</li>
                                <li class="list-group-item">TOTAL FINAL: <b>${totalNotas}</b></li>
                                <li class="list-group-item">STATUS: <b>${isAprovadoOuReprovado(totalNotas)}</b></li>
                            </ul>
                            `
                    }
                )
                }
            
            console.log(materias)

            materias.forEach(e => {
                resultados += `<br>` + e.info;
            })

            resultNotas.innerHTML = resultados;
        }}

        function maxinotas() {
            for (let i = 0; i < notas.length ; i++) {
                if (i == 0 && notas[0] > 20) {
                    alert("dfsafasdfsadf")
                    return true;
                }
                else if (i == 1 && notas[1] > 25) {
                    return true;
                    alert("dfsafasdfsadf")
                }
                else if (i == 2 && notas[2] > 25) {
                    return true;
                    alert("dfsafasdfsadf")
                }
                else if (i == 3 && notas[3] > 30) {
                    return true;
                    alert("dfsafasdfsadf")
                }
                return false;
            }
        }

        function notasdif0() {
            for (let i = 0; i < notas.length ; i++) {
                if (i == 0 && notas[0] < 0) {
                    alert("dfsafasdfsadf")
                    return true;
                }
                else if (i == 1 && notas[1] < 0) {
                    return true;
                    alert("dfsafasdfsadf")
                }
                else if (i == 2 && notas[2] < 0) {
                    return true;
                    alert("dfsafasdfsadf")
                }
                else if (i == 3 && notas[3] < 0) {
                    return true;
                    alert("dfsafasdfsadf")
                }
                return false;
            }
        }


        function isAprovadoOuReprovado(valor) {
            if (valor >= 60) {
                return "APROVADO"
            } else {
                return "REPROVADO"
            }
        }

        function verifi(){
            let select= document.querySelector("select").value
            let erro = false;
            materias.forEach((element)=>{
                if (element.nome == select){
                    alert("Esta materia ja foi adicionada");
                    erro = true;
                }
            });
        return erro;
        }



    </script>
</body>

</html>